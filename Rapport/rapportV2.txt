â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    RAPPORT DE PROJET - VERSION 2
        SYSTÃˆME DE RÃ‰SERVATION HÃ”TELIÃˆRE AVEC ARCHITECTURE SOAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Auteur: Projet SoapRepository
Date: 2025-01-19
Version: 2.0 (Sans code source)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


1. LE PROJET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1.1 POURQUOI
-------------

Ce projet a Ã©tÃ© conÃ§u pour mettre en place un systÃ¨me distribuÃ© de rÃ©servation
d'hÃ´tels utilisant les technologies de services web SOAP. L'objectif principal
est de dÃ©montrer l'architecture orientÃ©e services (SOA) dans un contexte rÃ©el.

Objectifs principaux :
â€¢ CrÃ©er un systÃ¨me multi-hÃ´tels permettant aux clients de rechercher et rÃ©server
  des chambres dans diffÃ©rents Ã©tablissements
â€¢ Utiliser SOAP comme protocole de communication entre les services
â€¢ ImplÃ©menter une architecture Ã  trois couches : Client, Agence, HÃ´tels
â€¢ DÃ©montrer l'interopÃ©rabilitÃ© entre services web distribuÃ©s

Cas d'usage :
Un client se connecte Ã  une agence de rÃ©servation, fournit ses critÃ¨res de
recherche (ville, dates, budget, nombre de lits, nombre d'Ã©toiles), l'agence
interroge alors plusieurs hÃ´tels via SOAP, agrÃ¨ge les rÃ©sultats et les prÃ©sente
au client qui peut ensuite effectuer une rÃ©servation.


1.2 COMMENT
-----------

Le projet est construit sur une architecture en trois couches, chacune ayant
un rÃ´le distinct :

Architecture globale :

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Client CLI     â”‚  â†’ Interface utilisateur (ligne de commande)
    â”‚  (Spring Boot)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ SOAP/HTTP
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Agence      â”‚  â†’ Service intermÃ©diaire (agrÃ©gateur)
    â”‚  (Port 8081)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ SOAP/HTTP
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  HÃ´tels (Serveurs SOAP)                     â”‚
    â”‚  - Paris (8082)                             â”‚
    â”‚  - Lyon (8083)                              â”‚
    â”‚  - Montpellier (8084)                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Technologies utilisÃ©es :
â€¢ Java 8+
â€¢ Spring Boot 2.7.18
â€¢ Maven pour la gestion des dÃ©pendances
â€¢ Spring Web Services (Spring WS) pour implÃ©menter les services SOAP

Le projet est divisÃ© en trois modules Maven indÃ©pendants :
1. Hotellerie - Services SOAP des hÃ´tels
2. Agence - Service intermÃ©diaire SOAP
3. Client - Client CLI en ligne de commande

2. L'HÃ”TEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

2.1 LOGIQUE MÃ‰TIER
------------------

Chaque hÃ´tel est une entitÃ© autonome qui gÃ¨re ses propres ressources.

ModÃ¨le de donnÃ©es :

Hotel :
  - nom : String (ex: "Grand Hotel Paris")
  - adresse : String (ex: "10 Rue de la Paix, Paris")
  - type : Type (enum: CAT1, CAT2, CAT3, CAT4, CAT5, CAT6)
  - listeDesChambres : List<Chambre>
  - listeReservation : List<Reservation>

Chambre :
  - id : int (identifiant unique)
  - nom : String (ex: "Chambre Double")
  - prix : float (en euros)
  - nbrDeLit : int
  - imageUrl : String (URL de l'image de la chambre)

Reservation :
  - id : int (auto-gÃ©nÃ©rÃ©)
  - client : Client
  - chambre : Chambre
  - dateArrive : Date
  - dateDepart : Date

Client :
  - nom : String
  - prenom : String
  - numeroCarteBleue : String

FonctionnalitÃ©s mÃ©tier :

1. Initialisation des chambres :
   Chaque hÃ´tel est configurÃ© avec un profil Spring Boot spÃ©cifique
   (paris, lyon, montpellier) qui dÃ©finit :
   - Le nom de l'hÃ´tel
   - Son adresse
   - Sa catÃ©gorie (nombre d'Ã©toiles)
   - Le port d'Ã©coute
   - Les chambres disponibles (5 chambres par hÃ´tel)

   Exemple pour Paris :
   - Chambre Simple : 80â‚¬, 1 lit
   - Chambre Double : 120â‚¬, 2 lits
   - Suite Deluxe : 200â‚¬, 3 lits
   - Chambre Familiale : 150â‚¬, 4 lits
   - Chambre Economy : 60â‚¬, 1 lit

2. Recherche de chambres disponibles :
   L'algorithme vÃ©rifie plusieurs critÃ¨res :
   a) Correspondance de l'adresse (recherche insensible Ã  la casse)
   b) Nombre d'Ã©toiles (doit correspondre exactement si spÃ©cifiÃ©)
   c) Prix (entre prixMin et prixMax si spÃ©cifiÃ©s)
   d) Nombre de lits (minimum requis)
   e) DisponibilitÃ© sur la pÃ©riode demandÃ©e

   VÃ©rification de disponibilitÃ© :
   Une chambre est disponible si aucune rÃ©servation existante ne chevauche
   la pÃ©riode demandÃ©e. Le systÃ¨me vÃ©rifie qu'il n'y a pas de conflit de dates
   avec les rÃ©servations existantes.

3. Gestion des rÃ©servations :
   - Attribution automatique d'un ID unique (AtomicInteger)
   - Validation des dates (dateArrive < dateDepart)
   - VÃ©rification de la disponibilitÃ© de la chambre
   - Si les dates chevauchent une rÃ©servation existante, la rÃ©servation
     est rejetÃ©e (ID = 0)
   - Si la rÃ©servation rÃ©ussit, elle est ajoutÃ©e Ã  la liste et un ID > 0
     est retournÃ©


2.2 LE SOAP
-----------

L'hÃ´tel expose un service SOAP pur (sans REST) pour communiquer avec l'agence.

Configuration SOAP :

L'endpoint SOAP est configurÃ© dans WebServiceConfig.java avec les paramÃ¨tres :
â€¢ Endpoint : /ws
â€¢ Namespace : http://tp1.org/hotellerie/soap
â€¢ WSDL : http://localhost:{port}/ws/hotel.wsdl
â€¢ SchÃ©ma XSD : /xsd/hotel.xsd

Fichier XSD (hotel.xsd) :
DÃ©finit la structure des messages SOAP Ã©changÃ©s.

Types complexes :
- hotel : Informations sur l'hÃ´tel
- chambre : DÃ©tails d'une chambre (id, nom, prix, nbrDeLit, imageUrl)
- reservation : Informations de rÃ©servation
- client : DonnÃ©es du client

OpÃ©rations SOAP exposÃ©es :

1. getHotelInfoRequest/Response
   Retourne les informations gÃ©nÃ©rales de l'hÃ´tel

   Request : (vide)
   Response :
     - nom
     - adresse
     - type (nombre d'Ã©toiles)
     - nombreChambres
     - nombreReservations

2. rechercherChambresDisponiblesRequest/Response
   Recherche des chambres selon des critÃ¨res

   Request :
     - adresse (optionnel)
     - dateArrive (requis)
     - dateDepart (requis)
     - prixMin (optionnel)
     - prixMax (optionnel)
     - nbrEtoile (optionnel)
     - nbrLits (optionnel)

   Response :
     - chambres : List<chambre>
     - hotelNom
     - hotelAdresse

3. effectuerReservationRequest/Response
   CrÃ©e une rÃ©servation pour une chambre

   Request :
     - client (nom, prenom, numeroCarteBleue)
     - chambreId
     - dateArrive
     - dateDepart

   Response :
     - reservationId (0 si Ã©chec, >0 si succÃ¨s)
     - message
     - success (boolean)

4. getReservationsRequest/Response
   RÃ©cupÃ¨re toutes les rÃ©servations de l'hÃ´tel

   Request : (vide)
   Response :
     - reservations : List<reservation>

Point d'entrÃ©e SOAP :

La classe HotelEndpoint.java utilise les annotations Spring :
  - @Endpoint : DÃ©clare la classe comme endpoint SOAP
  - @PayloadRoot : Mappe les requÃªtes SOAP aux mÃ©thodes
  - @RequestPayload : Unmarshall la requÃªte XML vers objet Java
  - @ResponsePayload : Marshall l'objet Java vers rÃ©ponse XML

Exemple de flux SOAP :

Le client envoie une enveloppe SOAP avec un Ã©lÃ©ment rechercherChambresDisponiblesRequest
contenant les critÃ¨res de recherche (dates, prix max, etc.).

Le serveur rÃ©pond avec une enveloppe SOAP contenant un Ã©lÃ©ment
rechercherChambresDisponiblesResponse avec la liste des chambres disponibles,
incluant leurs dÃ©tails (id, nom, prix, nombre de lits, URL d'image) ainsi que
les informations de l'hÃ´tel (nom, adresse).

Le systÃ¨me utilise Spring WS qui automatise :
â€¢ Le marshalling/unmarshalling XML â†” Java (via JAXB)
â€¢ La validation des messages selon le schÃ©ma XSD
â€¢ La gÃ©nÃ©ration du WSDL
â€¢ La gestion des erreurs SOAP



3. L'AGENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

3.1 LOGIQUE MÃ‰TIER
------------------

L'agence joue un rÃ´le d'orchestrateur et d'agrÃ©gateur entre les clients et
les hÃ´tels. Elle agit comme un double service :
â€¢ Serveur SOAP pour les clients
â€¢ Client SOAP pour les hÃ´tels

Architecture de l'agence :

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Agence     â”‚
    Client SOAP â”€â”€â†’ â”‚  Port 8081   â”‚ â”€â”€â†’ HÃ´tels SOAP
                    â”‚              â”‚     (8082-8084)
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚ Endpoint â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ â”‚  (Recv)  â”‚ â”‚     â”‚ MultiHotel  â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ SoapClient  â”‚
                    â”‚              â”‚     â”‚   (Send)    â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ â”‚ Service  â”‚ â”‚
                    â”‚ â”‚ (Logic)  â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Composants principaux :

1. AgenceEndpoint (Serveur SOAP)
   ReÃ§oit les requÃªtes SOAP des clients et expose 4 opÃ©rations :
   - ping : Test de disponibilitÃ©
   - rechercherChambres : Recherche multi-hÃ´tels
   - effectuerReservation : CrÃ©ation de rÃ©servation
   - getAllReservationsByHotel : Liste toutes les rÃ©servations

2. AgenceService (Logique mÃ©tier)
   â€¢ Validation des paramÃ¨tres d'entrÃ©e
   â€¢ Orchestration des appels aux hÃ´tels
   â€¢ AgrÃ©gation des rÃ©sultats
   â€¢ Gestion des erreurs

3. MultiHotelSoapClient (Client SOAP)
   â€¢ GÃ¨re la connexion aux 3 hÃ´tels configurÃ©s
   â€¢ Envoie les requÃªtes SOAP en parallÃ¨le
   â€¢ AgrÃ¨ge les rÃ©sultats de tous les hÃ´tels

Configuration multi-hÃ´tels :

Les 3 hÃ´tels sont configurÃ©s dans le fichier application.properties avec
leur nom, URL et informations d'accÃ¨s :

- Paris : http://localhost:8082/ws - Grand Hotel Paris
- Lyon : http://localhost:8083/ws - Hotel Lyon Centre
- Montpellier : http://localhost:8084/ws - Hotel Mediterranee

Logique de recherche multi-hÃ´tels :

Pour chaque requÃªte de recherche :
1. L'agence reÃ§oit les critÃ¨res du client
2. Elle interroge TOUS les hÃ´tels configurÃ©s en sÃ©quence
3. Pour chaque hÃ´tel :
   a) CrÃ©e une requÃªte SOAP vers l'endpoint de l'hÃ´tel
   b) Envoie les critÃ¨res de recherche
   c) RÃ©cupÃ¨re les chambres disponibles
   d) Ajoute le nom et l'adresse de l'hÃ´tel Ã  chaque chambre
4. AgrÃ¨ge tous les rÃ©sultats dans une liste unique
5. Retourne la liste complÃ¨te au client

Logique de rÃ©servation :

1. Le client envoie une demande avec :
   - chambreId (identifiant unique)
   - hotelUrl (pour savoir quel hÃ´tel contacter)
   - informations client
   - dates

2. L'agence :
   a) Identifie l'hÃ´tel concernÃ© via l'URL ou le nom
   b) CrÃ©e une requÃªte SOAP de rÃ©servation
   c) Envoie la requÃªte Ã  l'hÃ´tel spÃ©cifique
   d) ReÃ§oit la confirmation (reservationId)
   e) Retourne le rÃ©sultat au client

Gestion de la validation des dates :

Lorsqu'une rÃ©servation Ã©choue car les dates chevauchent une rÃ©servation
existante, l'hÃ´tel retourne un reservationId = 0. L'agence propage cette
information au client qui peut alors afficher le message appropriÃ©
("Mauvaise date" ou "Date dÃ©jÃ  prise").

DTOs (Data Transfer Objects) :

L'agence utilise des DTOs pour la conversion entre les diffÃ©rentes couches :

ChambreDTO :
  - id, numero, nom
  - prix, nbrLits
  - hotelNom, hotelAdresse, hotelUrl
  - disponible
  - imageUrl

RechercheRequest :
  - adresse, dateArrive, dateDepart
  - prixMin, prixMax
  - nbrEtoile, nbrLits

ReservationRequest :
  - clientNom, clientPrenom, numeroCarteBleue
  - chambreId, hotelUrl
  - dateArrive, dateDepart

ReservationResponse :
  - reservationId
  - message
  - success


3.2 LE SOAP
-----------

L'agence implÃ©mente SOAP des deux cÃ´tÃ©s :

A) SERVEUR SOAP (pour les clients)

Configuration :
La configuration est dÃ©finie dans SoapServiceConfig.java avec :
â€¢ Endpoint : /ws
â€¢ Namespace : http://tp1.org/agence
â€¢ WSDL : http://localhost:8081/ws/agence.wsdl
â€¢ SchÃ©ma XSD : /xsd/agence.xsd

SchÃ©ma XSD (agence.xsd) :
DÃ©finit les types et opÃ©rations cÃ´tÃ© agence.

Types complexes :
- chambre (avec hotelNom, hotelAdresse, hotelUrl en plus)
- client
- reservation

OpÃ©rations exposÃ©es :

1. pingRequest/Response
   Test de connectivitÃ©
   Response : String message

2. rechercherChambresRequest/Response
   Request : mÃªmes critÃ¨res que l'hÃ´tel
   Response : List<chambre> (agrÃ©gÃ©es de tous les hÃ´tels)

3. effectuerReservationRequest/Response
   Request : informations complÃ¨tes avec hotelUrl
   Response : reservationId, message, success

4. getAllReservationsByHotelRequest/Response
   Request : (vide)
   Response : Map de hotels â†’ List<reservation>

Endpoint :

La classe AgenceEndpoint.java utilise les annotations :
â€¢ @Endpoint : DÃ©clare le service SOAP
â€¢ @PayloadRoot : Mappe les opÃ©rations
â€¢ Injection de AgenceService pour la logique

Le traitement d'une requÃªte suit ce processus :
1. Extraction des paramÃ¨tres de la requÃªte SOAP
2. Appel au service mÃ©tier pour la logique
3. Conversion des DTOs vers les objets SOAP
4. Retour de la rÃ©ponse marshallÃ©e en XML

B) CLIENT SOAP (pour les hÃ´tels)

Configuration :
La classe MultiHotelSoapClient.java configure un client SOAP pour chaque hÃ´tel.

Un WebServiceTemplate est crÃ©Ã© avec un marshaller/unmarshaller JAXB qui gÃ¨re
la conversion automatique entre XML et objets Java.

Communication avec les hÃ´tels :

MÃ©thode de recherche multi-hÃ´tels :

Pour chaque hÃ´tel configurÃ©, l'agence :
- CrÃ©e une requÃªte SOAP avec les critÃ¨res de recherche
- Envoie la requÃªte via marshalSendAndReceive
- RÃ©cupÃ¨re la rÃ©ponse et convertit les chambres en DTOs
- Ajoute les informations de l'hÃ´tel (nom, URL)
- Continue avec les autres hÃ´tels en cas d'erreur
- AgrÃ¨ge tous les rÃ©sultats dans une liste unique

MÃ©thode de rÃ©servation ciblÃ©e :

L'agence identifie l'hÃ´tel concernÃ© via l'URL fournie, crÃ©e une requÃªte SOAP
spÃ©cifique, l'envoie Ã  l'hÃ´tel ciblÃ© et retourne le reservationId reÃ§u.

Avantages de cette architecture SOAP :

1. SÃ©paration des prÃ©occupations :
   - Les hÃ´tels gÃ¨rent leurs ressources
   - L'agence orchestre et agrÃ¨ge
   - Le client consomme un service unifiÃ©

2. ExtensibilitÃ© :
   - Ajout facile de nouveaux hÃ´tels (configuration)
   - Pas de modification du code client

3. Contrat strict :
   - WSDL dÃ©finit prÃ©cisÃ©ment les interfaces
   - Validation automatique via XSD
   - Typage fort en Java

4. IndÃ©pendance technologique :
   - HÃ´tels et agence peuvent Ãªtre en diffÃ©rents langages
   - SOAP est un standard universel



4. CLIENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4.1 LOGIQUE MÃ‰TIER
------------------

Le client est une application CLI (Command Line Interface) en Spring Boot
qui permet Ã  un utilisateur d'interagir avec le systÃ¨me de rÃ©servation via
une interface en ligne de commande.

Architecture du client :

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ClientApplication               â”‚
â”‚  (Point d'entrÃ©e Spring Boot)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ClientCLISoap                  â”‚
â”‚    (Interface utilisateur CLI)          â”‚
â”‚  - afficherMenu()                       â”‚
â”‚  - rechercherChambres()                 â”‚
â”‚  - effectuerReservation()               â”‚
â”‚  - afficherReservationsParHotel()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AgenceSoapClient                  â”‚
â”‚  (Client SOAP vers l'agence)            â”‚
â”‚  - ping()                               â”‚
â”‚  - rechercherChambres()                 â”‚
â”‚  - effectuerReservation()               â”‚
â”‚  - getAllReservationsByHotel()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ SOAP/HTTP
                 â†“
         Agence (Port 8081)

FonctionnalitÃ©s du client :

1. Menu interactif en couleur :
   Le client affiche un menu avec 5 options :
   1. Rechercher des chambres
   2. Effectuer une rÃ©servation
   3. Afficher les derniÃ¨res chambres trouvÃ©es
   4. Afficher toutes les rÃ©servations par hÃ´tel
   5. Quitter

2. Recherche de chambres :
   L'utilisateur saisit ses critÃ¨res :
   - Adresse (ville/rue) - optionnel
   - Date d'arrivÃ©e (format YYYY-MM-DD)
   - Date de dÃ©part (format YYYY-MM-DD)
   - Prix minimum - optionnel
   - Prix maximum - optionnel
   - Nombre d'Ã©toiles (1-6) - optionnel
   - Nombre de lits minimum - optionnel

   Le client envoie une requÃªte SOAP Ã  l'agence qui interroge tous les hÃ´tels
   et retourne une liste agrÃ©gÃ©e de chambres.

   Affichage des rÃ©sultats :
   Pour chaque chambre trouvÃ©e :
   - ID et numÃ©ro de chambre
   - Prix (en vert)
   - Nombre de lits
   - Nom et adresse de l'hÃ´tel
   - URL de l'image (en bleu)
   - DisponibilitÃ© (Oui en vert, Non en rouge)

3. RÃ©servation :
   AprÃ¨s une recherche, l'utilisateur peut rÃ©server une chambre :
   - SÃ©lection de l'ID de chambre parmi les rÃ©sultats
   - Saisie des informations client (nom, prÃ©nom, carte bancaire)
   - Saisie des dates (arrivÃ©e, dÃ©part)

   Validation :
   - VÃ©rification que l'ID existe dans les rÃ©sultats
   - Envoi de la requÃªte SOAP Ã  l'agence
   - Affichage du rÃ©sultat :
     â€¢ Si reservationId = 0 : "Mauvaise date" (rouge)
     â€¢ Si reservationId > 0 : "RÃ‰SERVATION CONFIRMÃ‰E !" (vert)
       avec l'ID de rÃ©servation
     â€¢ Si Ã©chec : Message d'erreur

4. Affichage des derniÃ¨res chambres :
   Permet de rÃ©afficher les rÃ©sultats de la derniÃ¨re recherche sans refaire
   une requÃªte SOAP.

5. Affichage des rÃ©servations par hÃ´tel :
   RÃ©cupÃ¨re toutes les rÃ©servations de tous les hÃ´tels via l'agence.
   Affichage organisÃ© par hÃ´tel avec prÃ©sentation dÃ©taillÃ©e de chaque
   rÃ©servation incluant le client, la chambre, les dates et le numÃ©ro
   de carte bancaire.

Interface utilisateur enrichie :

Le client utilise des codes ANSI pour colorer et structurer l'affichage :
â€¢ Couleurs : Rouge (erreurs), Vert (succÃ¨s), Jaune (avertissements),
  Bleu (informations), Cyan (titres)
â€¢ Styles : Gras pour les titres, sÃ©parateurs graphiques
â€¢ Emojis : ğŸ¨ ğŸ›ï¸ ğŸ“… ğŸ“† ğŸ’³ ğŸ‘¤ ğŸ–¼ï¸ pour une meilleure lisibilitÃ©

Gestion des erreurs :

Le client gÃ¨re plusieurs types d'erreurs :
â€¢ Connexion Ã  l'agence impossible : message au dÃ©marrage
â€¢ Saisies invalides : validation locale
â€¢ Erreurs SOAP : affichage du message d'erreur
â€¢ Pas de rÃ©sultats : message appropriÃ©


4.2 COMMENT Ã‡A FONCTIONNE
--------------------------

Flux complet d'une recherche et rÃ©servation :

1. DÃ‰MARRAGE DU CLIENT

   Commande : cd Client && mvn spring-boot:run

   â†’ Spring Boot dÃ©marre l'application
   â†’ Injection des dÃ©pendances (AgenceSoapClient, etc.)
   â†’ Appel de la mÃ©thode run de ClientCLISoap
   â†’ Test de connexion avec ping()
   â†’ Affichage du menu

2. RECHERCHE DE CHAMBRES

   Utilisateur saisit :
   - Adresse: Paris
   - Date arrivÃ©e: 2025-12-01
   - Date dÃ©part: 2025-12-05
   - Prix max: 150
   - Nombre de lits: 2

   Flux SOAP :

   a) Client crÃ©e un objet RechercherChambresRequest Java

   b) AgenceSoapClient appelle rechercherChambres() :
      - WebServiceTemplate marshall l'objet en XML
      - Envoi HTTP POST vers http://localhost:8081/ws

   c) Agence reÃ§oit la requÃªte SOAP :
      - AgenceEndpoint unmarshall XML en objet Java
      - AgenceService traite la logique mÃ©tier
      - MultiHotelSoapClient interroge les 3 hÃ´tels

   d) Pour chaque hÃ´tel (Paris, Lyon, Montpellier) :
      - CrÃ©ation d'une requÃªte SOAP spÃ©cifique
      - Envoi vers l'endpoint de l'hÃ´tel
      - HotelEndpoint reÃ§oit et traite
      - HotelService recherche dans ses chambres
      - Retour de la rÃ©ponse avec chambres disponibles

   e) Agence agrÃ¨ge les rÃ©sultats :
      - Combine les chambres des 3 hÃ´tels
      - Ajoute nom/adresse/URL de chaque hÃ´tel
      - Marshall le tout en XML
      - Retour au client

   f) Client reÃ§oit la rÃ©ponse :
      - Unmarshall XML en liste d'objets Chambre
      - Stockage dans dernieresChambres
      - Affichage formatÃ© avec couleurs

   Exemple de rÃ©sultat affichÃ© :

   âœ“ 3 chambre(s) trouvÃ©e(s):

   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   [ID: 2] Chambre Double
     Prix: 120.00â‚¬ | Lits: 2 | HÃ´tel: Grand Hotel Paris
     ğŸ–¼ï¸  Image: http://localhost:8082/images/Hotelle1.png
     Adresse: 10 Rue de la Paix, Paris
     Disponible: Oui
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

3. RÃ‰SERVATION

   Utilisateur saisit :
   - ID chambre: 2
   - Nom: Dupont
   - PrÃ©nom: Jean
   - Carte: 1234567890123456
   - ArrivÃ©e: 2025-12-10
   - DÃ©part: 2025-12-15

   Flux SOAP :

   a) Client identifie la chambre dans dernieresChambres
      â†’ RÃ©cupÃ¨re hotelUrl (ex: http://localhost:8082/ws)

   b) CrÃ©ation de EffectuerReservationRequest avec toutes les informations
      nÃ©cessaires (client, chambre, dates, hotel)

   c) AgenceSoapClient appelle effectuerReservation() :
      - Marshall objet en XML
      - POST vers http://localhost:8081/ws

   d) Agence reÃ§oit et traite :
      - Extraction de hotelUrl
      - Identification de l'hÃ´tel concernÃ© (Paris)
      - CrÃ©ation requÃªte SOAP vers l'hÃ´tel
      - POST vers http://localhost:8082/ws

   e) HÃ´tel Paris traite la rÃ©servation :
      - La mÃ©thode effectuerReservation du service est appelÃ©e
      - VÃ©rification de disponibilitÃ© sur les dates
      - Si OK :
          * CrÃ©ation d'une Reservation avec ID auto-gÃ©nÃ©rÃ©
          * Ajout Ã  la liste des rÃ©servations
          * Retour reservationId (ex: 1)
      - Si dates chevauchent une rÃ©servation existante :
          * Pas d'ajout Ã  la liste
          * Retour reservationId = 0

   f) Agence propage la rÃ©ponse au client

   g) Client affiche le rÃ©sultat :
      - Si reservationId = 0 :
          âœ— Mauvaise date
      - Si reservationId > 0 :
          âœ“ RÃ‰SERVATION CONFIRMÃ‰E !
          ID de rÃ©servation: 1

4. AFFICHAGE DES RÃ‰SERVATIONS

   Flux SOAP :

   a) Client appelle getAllReservationsByHotel()

   b) Agence interroge les 3 hÃ´tels :
      - Appel SOAP getReservations() sur chaque hÃ´tel
      - AgrÃ©gation dans une Map (hotelNom â†’ Liste de Reservations)

   c) Retour au client

   d) Affichage organisÃ© par hÃ´tel avec toutes les informations

Configuration SOAP cÃ´tÃ© client :

Le fichier SoapClientConfig.java dÃ©finit :
- Un Jaxb2Marshaller configurÃ© avec le package des classes gÃ©nÃ©rÃ©es
- Un AgenceSoapClient configurÃ© avec l'URL de l'agence et le marshaller

Le client utilise WebServiceGatewaySupport de Spring WS qui fournit
la mÃ©thode marshalSendAndReceive() pour gÃ©rer automatiquement le cycle
complet : objet Java â†’ XML â†’ envoi HTTP â†’ rÃ©ception â†’ XML â†’ objet Java

Classes gÃ©nÃ©rÃ©es depuis WSDL :

Le projet utilise le plugin Maven jaxb2-maven-plugin pour gÃ©nÃ©rer
automatiquement les classes Java depuis le WSDL de l'agence.

Le plugin est configurÃ© pour lire le fichier agence.wsdl et gÃ©nÃ©rer
les classes dans le dossier target/generated-sources/xjc/

Classes gÃ©nÃ©rÃ©es :
- RechercherChambresRequest.java
- RechercherChambresResponse.java
- Chambre.java
- EffectuerReservationRequest.java
- EffectuerReservationResponse.java
- etc.

Ces classes sont utilisÃ©es directement par le client sans besoin de
mappage manuel.

Avantages de l'approche CLI :

â€¢ Pas de complexitÃ© d'interface web
â€¢ Focus sur la communication SOAP
â€¢ DÃ©monstration claire du flux de donnÃ©es
â€¢ Facile Ã  dÃ©boguer et tester
â€¢ IdÃ©al pour comprendre les Ã©changes SOAP



5. L'IMAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

5.1 POURQUOI FAIRE ?
--------------------

L'ajout des images rÃ©pond Ã  plusieurs objectifs :

1. RÃ©alisme du systÃ¨me :
   Un vrai systÃ¨me de rÃ©servation hÃ´teliÃ¨re permet aux clients de voir
   des photos des chambres avant de rÃ©server. C'est un Ã©lÃ©ment essentiel
   de l'expÃ©rience utilisateur.

2. DÃ©monstration de transfert de donnÃ©es supplÃ©mentaires :
   Montre comment Ã©tendre le schÃ©ma SOAP pour inclure des informations
   multimedia (ici via URL, mais pourrait Ãªtre du Base64, etc.).

3. Illustration de l'architecture multi-couches :
   L'URL de l'image doit traverser toutes les couches :
   HÃ´tel â†’ Agence â†’ Client
   Chaque couche doit Ãªtre modifiÃ©e pour propager l'information.

4. Pratique de l'Ã©volution de schÃ©ma :
   Ajouter un champ Ã  un service SOAP existant nÃ©cessite :
   - Modification du XSD
   - Modification du modÃ¨le de donnÃ©es
   - Modification des endpoints
   - Recompilation de tous les projets
   - RÃ©gÃ©nÃ©ration des classes SOAP

Solution choisie : URL plutÃ´t que donnÃ©es binaires

Au lieu d'envoyer l'image en Base64 dans le XML SOAP (lourd et inefficace),
on envoie simplement l'URL HTTP de l'image. Le client peut ensuite :
- Afficher l'URL (comme actuellement)
- TÃ©lÃ©charger l'image si besoin
- L'afficher dans une interface graphique future

Avantages :
â€¢ Messages SOAP lÃ©gers
â€¢ SÃ©paration des prÃ©occupations (donnÃ©es vs. ressources statiques)
â€¢ PossibilitÃ© de caching cÃ´tÃ© client
â€¢ Ã‰conomie de bande passante


5.2 COMMENT Ã‡A MARCHE ?
------------------------

ImplÃ©mentation complÃ¨te du systÃ¨me d'images :

1. ORGANISATION DES FICHIERS

Structure :
SoapRepository/
â”œâ”€â”€ Image/                      # Dossier racine (backup)
â”‚   â”œâ”€â”€ Hotelle1.png           # Image Paris
â”‚   â”œâ”€â”€ Hotelle2.png           # Image Lyon
â”‚   â””â”€â”€ Hotelle3.png           # Image Montpellier
â””â”€â”€ Hotellerie/
    â””â”€â”€ Image/                  # Images servies par les hÃ´tels
        â”œâ”€â”€ Hotelle1.png
        â”œâ”€â”€ Hotelle2.png
        â””â”€â”€ Hotelle3.png

Mapping HÃ´tel â†’ Image :
- Paris (8082) â†’ Hotelle1.png
- Lyon (8083) â†’ Hotelle2.png
- Montpellier (8084) â†’ Hotelle3.png

2. MODIFICATION DU MODÃˆLE HÃ”TEL

a) Classe Chambre.java :
   Un champ imageUrl de type String a Ã©tÃ© ajoutÃ© Ã  la classe Chambre
   avec son constructeur, getter et setter appropriÃ©s.

b) XSD hotel.xsd :
   Le type complexe "chambre" a Ã©tÃ© Ã©tendu pour inclure un Ã©lÃ©ment
   imageUrl de type string. L'attribut minOccurs="0" rend le champ
   optionnel pour assurer la compatibilitÃ©.

3. GÃ‰NÃ‰RATION DYNAMIQUE DES URL

Le service HotelService gÃ©nÃ¨re dynamiquement les URLs d'images en fonction
de la configuration :

- RÃ©cupÃ©ration du port du serveur depuis la configuration
- RÃ©cupÃ©ration du nom de la ville depuis la configuration
- DÃ©termination du nom de fichier image selon la ville (switch)
- Construction de l'URL complÃ¨te : http://localhost:{port}/images/{fichier}

RÃ©sultat :
- Paris : http://localhost:8082/images/Hotelle1.png
- Lyon : http://localhost:8083/images/Hotelle2.png
- Montpellier : http://localhost:8084/images/Hotelle3.png

4. CONFIGURATION DU SERVEUR DE FICHIERS STATIQUES

La classe StaticResourceConfig configure Spring Boot pour servir les fichiers
statiques :

Le gestionnaire de ressources est configurÃ© pour mapper l'URL /images/**
vers deux emplacements :
- Le dossier "Image/" relatif au rÃ©pertoire d'exÃ©cution
- Le dossier "static/images/" dans les ressources classpath

Fonctionnement :
â€¢ RequÃªte HTTP GET vers /images/Hotelle1.png
â€¢ Spring Boot cherche le fichier dans les emplacements configurÃ©s
â€¢ Retourne le fichier avec Content-Type: image/png

5. PROPAGATION DANS LES ENDPOINTS SOAP

L'endpoint HotelEndpoint a Ã©tÃ© modifiÃ© pour inclure l'imageUrl lors de la
conversion des objets Chambre mÃ©tier vers les objets Chambre SOAP.

Pour chaque chambre trouvÃ©e, le systÃ¨me :
- Extrait tous les champs standards (id, nom, prix, nombre de lits)
- Ajoute l'imageUrl depuis l'objet mÃ©tier
- Construit l'objet SOAP complet
- L'ajoute Ã  la rÃ©ponse

6. MODIFICATIONS DE L'AGENCE

a) XSD agence.xsd :
   Le type complexe "chambre" a Ã©tÃ© Ã©tendu pour inclure imageUrl
   (minOccurs="0" pour l'optionnalitÃ©)

b) ChambreDTO.java :
   Le DTO a Ã©tÃ© enrichi avec un champ imageUrl, son constructeur mis Ã  jour
   et les accesseurs ajoutÃ©s.

c) MultiHotelSoapClient.java :
   Lors de la conversion des rÃ©ponses SOAP en DTOs, l'imageUrl est extraite
   de chaque objet Chambre SOAP et incluse dans le ChambreDTO crÃ©Ã©.

d) AgenceEndpoint.java :
   Lors de la conversion des DTOs en objets SOAP pour la rÃ©ponse, l'imageUrl
   est propagÃ©e depuis le DTO vers l'objet Chambre SOAP.

7. AFFICHAGE CÃ”TÃ‰ CLIENT

La classe ClientCLISoap a Ã©tÃ© modifiÃ©e pour afficher l'URL de l'image dans
les rÃ©sultats de recherche.

Pour chaque chambre affichÃ©e :
- ID et nom de la chambre
- Prix et nombre de lits
- VÃ©rification de la prÃ©sence d'une imageUrl
- Si prÃ©sente : affichage avec l'emoji ğŸ–¼ï¸ et l'URL en couleur
- Nom et adresse de l'hÃ´tel
- DisponibilitÃ©

RÃ©sultat affichÃ© :

[ID: 2] Chambre Double
  Prix: 120.00â‚¬ | Lits: 2 | HÃ´tel: Grand Hotel Paris
  ğŸ–¼ï¸  Image: http://localhost:8082/images/Hotelle1.png
  Adresse: 10 Rue de la Paix, Paris
  Disponible: Oui

8. FLUX COMPLET

Client recherche â†’ Agence â†’ HÃ´tel Paris :

1. HÃ´tel crÃ©e chambre avec imageUrl = "http://localhost:8082/images/Hotelle1.png"
2. HÃ´tel retourne chambre dans rÃ©ponse SOAP
3. Agence rÃ©cupÃ¨re chambre avec imageUrl
4. Agence propage imageUrl dans sa rÃ©ponse SOAP
5. Client reÃ§oit chambre avec imageUrl
6. Client affiche l'URL

Si le client veut voir l'image :
- Copier l'URL
- Ouvrir dans un navigateur
- OU tÃ©lÃ©charger via curl ou wget

9. VÃ‰RIFICATION

Test manuel :

DÃ©marrer un hÃ´tel avec son profil spÃ©cifique, puis tester l'accÃ¨s direct
Ã  l'image via curl avec l'option -I pour voir les headers HTTP.

RÃ©ponse attendue :
HTTP/1.1 200
Content-Type: image/png
Content-Length: (taille en octets)

Test SOAP complet :

1. DÃ©marrer le systÃ¨me : ./start-system-soap.sh
2. Lancer le client : cd Client && mvn spring-boot:run
3. Rechercher chambres Ã  Paris
4. VÃ©rifier que les URLs d'images s'affichent
5. Tester l'URL dans un navigateur

Compilation aprÃ¨s modifications :

L'ordre de compilation est crucial car l'agence dÃ©pend des types SOAP de
l'hÃ´tel, et le client dÃ©pend des types SOAP de l'agence.

Ordre recommandÃ© :
1. Hotellerie : mvn clean compile -DskipTests
2. Agence : mvn clean compile -DskipTests
3. Client : mvn clean compile -DskipTests



6. Ã‰VOLUTION FUTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Le systÃ¨me actuel fonctionne mais pourrait Ãªtre amÃ©liorÃ© de plusieurs faÃ§ons :

6.1 AMÃ‰LIORATIONS FONCTIONNELLES

1. Interface Web (React/Angular)
   â€¢ Remplacer le CLI par une vraie interface web
   â€¢ Affichage visuel des images de chambres
   â€¢ Calendrier interactif pour les dates
   â€¢ Filtrage et tri en temps rÃ©el

2. Authentification et Comptes Utilisateurs
   â€¢ Login/Register
   â€¢ Historique des rÃ©servations par utilisateur
   â€¢ Profils utilisateurs
   â€¢ WS-Security pour sÃ©curiser SOAP

3. Gestion des Annulations
   â€¢ Nouvelle opÃ©ration SOAP : annulerReservation
   â€¢ Politique d'annulation (dÃ©lai, remboursement)
   â€¢ Notification par email

4. SystÃ¨me de Paiement
   â€¢ IntÃ©gration Stripe/PayPal
   â€¢ Validation rÃ©elle des cartes bancaires
   â€¢ Confirmation de paiement

5. Recherche AvancÃ©e
   â€¢ Recherche par gÃ©olocalisation (distance d'un point)
   â€¢ Filtres : wifi, parking, petit-dÃ©jeuner, climatisation
   â€¢ Tri par prix, note, distance

6. SystÃ¨me de Notation et Avis
   â€¢ Les clients peuvent noter les hÃ´tels
   â€¢ Commentaires et photos
   â€¢ Moyenne des notes visible dans les rÃ©sultats

6.2 AMÃ‰LIORATIONS TECHNIQUES

1. Base de DonnÃ©es Persistante
   â€¢ Actuellement : donnÃ©es en mÃ©moire (perdues au redÃ©marrage)
   â€¢ Migration vers PostgreSQL/MySQL
   â€¢ JPA/Hibernate pour l'ORM
   â€¢ Persistance rÃ©elle des rÃ©servations

2. Architecture Microservices
   â€¢ Conteneurisation Docker
   â€¢ Orchestration Kubernetes
   â€¢ Service discovery (Eureka)
   â€¢ API Gateway

3. Gestion d'Erreurs Robuste
   â€¢ Retry automatique en cas d'Ã©chec
   â€¢ Circuit breaker (Hystrix/Resilience4j)
   â€¢ Fallback : si un hÃ´tel ne rÃ©pond pas, continuer avec les autres
   â€¢ Logging centralisÃ© (ELK Stack)

4. Performance
   â€¢ Appels SOAP en parallÃ¨le (CompletableFuture)
   â€¢ Cache Redis pour les rÃ©sultats de recherche
   â€¢ CDN pour les images
   â€¢ Compression GZIP des messages SOAP

5. Monitoring et ObservabilitÃ©
   â€¢ Prometheus pour les mÃ©triques
   â€¢ Grafana pour les dashboards
   â€¢ Tracing distribuÃ© (Zipkin/Jaeger)
   â€¢ Alertes en cas de problÃ¨me

6. Tests AutomatisÃ©s
   â€¢ Tests unitaires (JUnit, Mockito)
   â€¢ Tests d'intÃ©gration SOAP (SoapUI)
   â€¢ Tests de charge (JMeter)
   â€¢ Tests end-to-end (Selenium)

7. CI/CD
   â€¢ Pipeline GitLab/GitHub Actions
   â€¢ Build automatique
   â€¢ Tests automatiques
   â€¢ DÃ©ploiement automatique

6.3 Ã‰VOLUTIONS PROTOCOLAIRES

1. Migration REST en Option
   â€¢ Offrir REST en alternative Ã  SOAP
   â€¢ API RESTful JSON pour les clients web/mobile
   â€¢ Swagger/OpenAPI pour la documentation
   â€¢ GraphQL pour les requÃªtes complexes

2. Webhooks
   â€¢ Notifications asynchrones
   â€¢ Alerte quand une chambre se libÃ¨re
   â€¢ Confirmation de rÃ©servation par webhook

3. WebSockets
   â€¢ Mise Ã  jour en temps rÃ©el de la disponibilitÃ©
   â€¢ Chat support client
   â€¢ Notifications push

6.4 SÃ‰CURITÃ‰

1. HTTPS/TLS
   â€¢ Chiffrement des communications
   â€¢ Certificats SSL
   â€¢ HTTP/2

2. WS-Security
   â€¢ Signature digitale des messages SOAP
   â€¢ Chiffrement des donnÃ©es sensibles
   â€¢ Timestamps pour prÃ©venir les replay attacks

3. OAuth2/JWT
   â€¢ Authentification moderne
   â€¢ Token-based authentication
   â€¢ Refresh tokens

4. Validation et Sanitization
   â€¢ Protection contre injection SQL
   â€¢ Validation stricte des entrÃ©es
   â€¢ Escape des donnÃ©es

6.5 BUSINESS

1. Multi-langue
   â€¢ Internationalisation (i18n)
   â€¢ Support franÃ§ais, anglais, espagnol, etc.
   â€¢ Traduction des descriptions d'hÃ´tels

2. Multi-devise
   â€¢ Conversion automatique (â‚¬, $, Â£)
   â€¢ API de taux de change en temps rÃ©el

3. Promotions et RÃ©ductions
   â€¢ Codes promo
   â€¢ RÃ©ductions pour sÃ©jours longs
   â€¢ Programme de fidÃ©litÃ©

4. Recommandations
   â€¢ Machine Learning pour suggÃ©rer des hÃ´tels
   â€¢ BasÃ© sur l'historique de l'utilisateur
   â€¢ HÃ´tels similaires

5. Analyse et Statistiques
   â€¢ Dashboard administrateur
   â€¢ Taux d'occupation
   â€¢ Revenus
   â€¢ Tendances de rÃ©servation



7. CONCLUSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

7.1 SYNTHÃˆSE DU PROJET
----------------------

Ce projet a permis de mettre en Å“uvre avec succÃ¨s un systÃ¨me de rÃ©servation
hÃ´teliÃ¨re basÃ© sur une architecture SOAP distribuÃ©e. L'ensemble du systÃ¨me
est fonctionnel et dÃ©montre les principes fondamentaux des services web.

Points clÃ©s rÃ©alisÃ©s :

âœ“ Architecture Ã  trois couches entiÃ¨rement fonctionnelle
âœ“ Communication SOAP pure entre tous les composants
âœ“ Support de 3 hÃ´tels simultanÃ©s (Paris, Lyon, Montpellier)
âœ“ Client CLI interactif et convivial
âœ“ Gestion complÃ¨te des rÃ©servations avec validation des dates
âœ“ SystÃ¨me d'images associÃ©es aux chambres
âœ“ Scripts d'automatisation pour le dÃ©marrage
âœ“ Documentation complÃ¨te

7.2 OBJECTIFS ATTEINTS
-----------------------

1. Technique :
   â€¢ MaÃ®trise de SOAP avec Spring Web Services
   â€¢ ComprÃ©hension du marshalling/unmarshalling XML
   â€¢ Utilisation de JAXB et des schÃ©mas XSD
   â€¢ Configuration de services web multi-instances
   â€¢ Gestion des ressources statiques (images)

2. Architecture :
   â€¢ Conception d'une architecture distribuÃ©e cohÃ©rente
   â€¢ SÃ©paration claire des responsabilitÃ©s
   â€¢ Pattern client-serveur sur plusieurs niveaux
   â€¢ AgrÃ©gation de services (pattern Aggregator dans l'agence)

3. Fonctionnel :
   â€¢ Recherche multi-critÃ¨res fonctionnelle
   â€¢ SystÃ¨me de rÃ©servation avec validation
   â€¢ DÃ©tection des conflits de dates
   â€¢ Consultation des rÃ©servations par hÃ´tel
   â€¢ Affichage d'informations enrichies (images)

7.3 DÃ‰FIS RENCONTRÃ‰S ET SOLUTIONS
----------------------------------

1. Synchronisation des schÃ©mas XSD
   ProblÃ¨me : Modifications dans un XSD nÃ©cessitent recompilation de tous
   Solution : Scripts de compilation automatique, ordre de build respectÃ©

2. Validation des dates de rÃ©servation
   ProblÃ¨me : DÃ©tection client-side des rÃ©servations refusÃ©es
   Solution : Utilisation de reservationId = 0 comme indicateur d'Ã©chec

3. Gestion multi-hÃ´tels
   ProblÃ¨me : Configuration dynamique de plusieurs instances
   Solution : Profils Spring Boot (paris, lyon, montpellier)

4. Propagation des informations d'images
   ProblÃ¨me : Nouveau champ Ã  traverser toutes les couches
   Solution : Modification systÃ©matique XSD â†’ DTO â†’ Endpoints

7.4 ACQUIS PÃ‰DAGOGIQUES
------------------------

Ce projet a permis de comprendre :

â€¢ Le fonctionnement dÃ©taillÃ© de SOAP (enveloppe, body, WSDL)
â€¢ La diffÃ©rence entre SOAP et REST
â€¢ L'importance des contrats d'interface (WSDL, XSD)
â€¢ La gestion de services distribuÃ©s
â€¢ Les avantages du typage fort (Java + XML Schema)
â€¢ Les enjeux de l'interopÃ©rabilitÃ© entre services

CompÃ©tences dÃ©veloppÃ©es :

â€¢ Configuration Spring Boot avancÃ©e
â€¢ DÃ©bogage de messages SOAP
â€¢ Gestion de projets Maven multi-modules
â€¢ Scripts Shell pour l'automatisation
â€¢ Design patterns (Aggregator, Gateway, DTO)
â€¢ Documentation technique

7.5 PERSPECTIVES
----------------

Le systÃ¨me constitue une base solide pour des Ã©volutions futures :

Ã€ court terme :
â€¢ Ajout de tests automatisÃ©s
â€¢ Conteneurisation Docker
â€¢ Base de donnÃ©es persistante

Ã€ moyen terme :
â€¢ Interface web moderne
â€¢ API REST complÃ©mentaire
â€¢ SystÃ¨me de notifications

Ã€ long terme :
â€¢ Architecture microservices complÃ¨te
â€¢ Machine Learning pour recommandations
â€¢ Application mobile

7.6 RETOUR D'EXPÃ‰RIENCE
------------------------

Forces du projet :

+ Architecture claire et modulaire
+ Code bien structurÃ© et commentÃ©
+ Documentation exhaustive
+ SystÃ¨me fonctionnel de bout en bout
+ DÃ©monstration concrÃ¨te de SOAP

Points d'amÃ©lioration possibles :

- Persistence des donnÃ©es (actuellement en mÃ©moire)
- Tests unitaires et d'intÃ©gration limitÃ©s
- Gestion d'erreurs Ã  renforcer
- Performance non optimisÃ©e (appels sÃ©quentiels)
- SÃ©curitÃ© basique (pas d'authentification)

7.7 MOT DE LA FIN
------------------

Ce projet dÃ©montre qu'il est possible de construire un systÃ¨me distribuÃ©
cohÃ©rent et fonctionnel avec SOAP, malgrÃ© la tendance actuelle vers REST.

SOAP reste pertinent dans certains contextes :
â€¢ Environnements d'entreprise legacy
â€¢ SystÃ¨mes nÃ©cessitant un contrat strict
â€¢ InteropÃ©rabilitÃ© avec des technologies .NET, Java EE
â€¢ Besoins de sÃ©curitÃ© avancÃ©e (WS-Security)

L'expÃ©rience acquise sur ce projet est transfÃ©rable Ã  d'autres technologies
(REST, gRPC, GraphQL) car les concepts fondamentaux restent identiques :
â€¢ SÃ©paration des prÃ©occupations
â€¢ Contrats d'interface
â€¢ Communication client-serveur
â€¢ SÃ©rialisation/dÃ©sÃ©rialisation
â€¢ Gestion d'erreurs distribuÃ©es

Le systÃ¨me est prÃªt pour une dÃ©monstration et peut servir de base pour
des projets futurs ou des extensions pÃ©dagogiques.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              FIN DU RAPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Contacts et Ressources :

Repository : /home/corentinfay/Bureau/SoapRepository

Scripts de dÃ©marrage :
â€¢ ./start-system-soap.sh : Lance tout le systÃ¨me
â€¢ ./start-robuste.sh : Version avec retry
â€¢ ./premier-test.sh : Test rapide

Documentation :
â€¢ PROJET_COMPLET.md : Vue d'ensemble
â€¢ Hotellerie/SOAP_README.md : Documentation hÃ´tel
â€¢ Agence/README.md : Documentation agence
â€¢ Client/README.md : Documentation client
â€¢ IMPLEMENTATION_IMAGES.md : SystÃ¨me d'images

Tests :
â€¢ test-3-hotels.sh : Test des 3 hÃ´tels
â€¢ test-connexion-soap.sh : Test de connexion
â€¢ test-images.sh : Test des images

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

